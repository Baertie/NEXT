{"version":3,"sources":["assets/effects/br/topBlack-lighten.png","assets/effects/br/botRed-softLight.png","assets/effects/br/botBlack-softLight.png","assets/effects/overlay/blackOverlay.png","components/Postercarousel.jsx","components/Camera.jsx","components/Onboarding.jsx","components/Loader.jsx","components/Game.jsx","components/Socket.jsx","api/Api.jsx","containers/Wrapper.jsx","components/Debugnavigation.jsx","App.js","serviceWorker.js","store/index.js","index.js","assets/effects/bm/topMag-lighten.png","assets/effects/bm/topBlue-lighten.png","assets/effects/bm/botMag-softLight.png","assets/effects/bm/botBlue-softLight.png","assets/effects/overlay/whiteOverlay.png","assets/referenceImages/reference_1.jpg","assets/referenceImages/reference_2.jpg","assets/referenceImages/reference_3.jpg","assets/effects/br/topRed-lighten.png"],"names":["module","exports","Postercarousel","props","state","posterArray","posterIndex","this","timerID","setInterval","tick","timeOut","clearInterval","length","setState","src","alt","style","width","height","Component","Camera","_isMounted","detect","a","async","videoTag","current","faceapi","ssdMobilenetv1","loadFromUri","displaySize","console","log","detected","detections","timeSinceDetectedFace","React","createRef","canvasTag","video","bind","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","store","setDetected","position","top","left","visibility","id","ref","autoPlay","muted","inject","observer","onClick","e","resetEverything","Loader","Game","initSocket","loadModels","faceLandmark68TinyNet","getReferenceData","referenceCanvasTag","ctx","getContext","referenceImage","Image","onload","drawImage","withFaceLandmarks","detectionsWithLandmarks","landMarkPoints","landmarks","positions","addPointsToState","drawFaceLandmarks","_isLoaded","referenceImageArray","currentRound","screenShot","canvas","clearRect","addSharpenEffect","addVisualEffects","calculateDistance","goToNextRound","image","greyCanvas","greyCanvasTag","blurCanvas","blurCanvasTag","greyContext","blurContext","globalCompositeOperation","fillStyle","fillRect","stackblur","globalAlpha","translate","scale","botBlueSoftImg","botMagSoftImg","topBlueLightenImg","topMagLightenImg","whiteOverlayImg","botBlueSoft","botMagSoft","topBlueLighten","topMagLighten","whiteOverlay","points","type","faceCurveArr","lEyebrowCurveArr","rEyebrowCurveArr","noseBridgeCurveArr","noseBotCurveArr","lEyeCurveArr","rEyeCurveArr","oMouthCurveArr","iMouthCurveArr","i","push","curves","faceCurves","lEyebrowCurves","rEyebrowCurves","noseBridgeCurves","noseBotCurves","lEyeCurves","rEyeCurves","oMouthCurves","iMouthCurves","similarityFace","shapeSimilarity","similarityLEyeBrow","similarityREyeBrow","similarityNoseBridge","similarityNoseBot","similarityLEye","similarityREye","similarityOMouth","similarityIMouth","averageSimilarity","similarity","curvesSim","prevState","referenceImageTag","constraints","audio","maxRounds","reference1","reference2","reference3","setGameEnded","display","transform","Socket","ownVideoFeed","flowStatus","startGame","App","className","Boolean","window","location","hostname","match","configure","enforceActions","Store","decorate","observable","action","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6a9c4b94.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/topBlack-lighten.cbdaa932.png\";","module.exports = __webpack_public_path__ + \"static/media/botRed-softLight.bb02e9f5.png\";","module.exports = __webpack_public_path__ + \"static/media/botBlack-softLight.ff23e384.png\";","module.exports = __webpack_public_path__ + \"static/media/blackOverlay.54ec1d9f.png\";","import React, { Component } from \"react\";\n\nclass Postercarousel extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      posterArray: [\n        \"http://jannesdegreve.be/next/posters/affiche_1\",\n        \"http://jannesdegreve.be/next/posters/affiche_2\",\n        \"http://jannesdegreve.be/next/posters/affiche_3\",\n        \"http://jannesdegreve.be/next/posters/affiche_4\",\n        \"http://jannesdegreve.be/next/posters/affiche_5\",\n        \"http://jannesdegreve.be/next/posters/affiche_6\",\n        \"http://jannesdegreve.be/next/posters/affiche_7\"\n      ],\n      posterIndex: 0\n    };\n  }\n\n  componentDidMount() {\n    this.timerID = setInterval(() => this.tick(), this.props.timeOut);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  tick() {\n    if (this.state.posterIndex < this.state.posterArray.length - 1) {\n      this.setState({ posterIndex: this.state.posterIndex + 1 });\n    } else {\n      this.setState({ posterIndex: 0 });\n    }\n  }\n\n  render() {\n    return (\n      <img\n        src={this.state.posterArray[this.state.posterIndex]}\n        alt=\"\"\n        style={{ width: \"100%\", height: \"auto\" }}\n      ></img>\n    );\n  }\n}\n\nexport default Postercarousel;\n","import React, { Component } from \"react\";\nimport * as faceapi from \"face-api.js\";\nimport Postercarousel from \"../components/Postercarousel\";\nimport { inject, PropTypes, observer } from \"mobx-react\";\n\nclass Camera extends Component {\n  // prevents memory leak error, since we're using setState in an async function\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n    this.videoTag = React.createRef();\n    this.canvasTag = React.createRef();\n    this.state = {\n      video: null,\n      timeSinceDetectedFace: 0,\n      detected: false\n    };\n    this.detect = this.detect.bind(this);\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    // getting access to webcam\n    navigator.mediaDevices\n      .getUserMedia({ video: true })\n      .then(stream => (this.videoTag.current.srcObject = stream), this.detect())\n      .catch(console.log(\"failed to get user media\"));\n  }\n\n  componentWillUnmount() {\n    // Make sure async functions don't crash when switching components\n    this._isMounted = false;\n    clearInterval(this.timerID);\n  }\n\n  detect = async () => {\n    // Videotag\n    const videoTag = this.videoTag.current;\n\n    // Detect whether a face is on the screen\n    await faceapi.nets.ssdMobilenetv1.loadFromUri(\"./models\");\n    const displaySize = { width: videoTag.width, height: videoTag.height };\n    console.log(\"displaySize\", displaySize);\n\n    // Check every 400ms whether the face is still on the webcam\n    this.timerID = setInterval(async () => {\n      if (this.state.detected === false) {\n        const detections = await faceapi.detectAllFaces(videoTag);\n\n        console.log(detections.length);\n        if (this._isMounted) {\n          if (detections.length > 0) {\n            // If a face has been on the screen for x seconds, move to the onboarding\n            if (this.state.timeSinceDetectedFace >= 2000) {\n              console.log(\"3 seconden lang een gezicht\");\n              this.state.detected = true;\n            }\n            this.setState({\n              timeSinceDetectedFace: this.state.timeSinceDetectedFace + 200\n            });\n          } else {\n            // Reset the time since detection\n            this.setState({ timeSinceDetectedFace: 0 });\n          }\n        }\n      }\n    }, 400);\n  };\n\n  render() {\n    const { store } = this.props;\n    if (this.state.detected === true) {\n      store.setDetected();\n    }\n\n    return (\n      <div style={{ position: \"relative\" }}>\n        <>\n          <Postercarousel timeOut={3000} />\n          <div>\n            <div>\n              <video\n                style={{\n                  position: \"absolute\",\n                  top: \"0\",\n                  left: \"0\",\n                  visibility: \"hidden\"\n                }}\n                id=\"videoTag\"\n                ref={this.videoTag}\n                width={500}\n                height={500}\n                autoPlay\n                muted\n              ></video>\n            </div>\n          </div>\n        </>\n      </div>\n    );\n  }\n}\nexport default inject(`store`)(observer(Camera));\n","import React, { Component } from \"react\";\nimport { inject, PropTypes, observer } from \"mobx-react\";\n\nconst Onboarding = ({ store }) => {\n  const handleResetClick = e => {\n    console.log(\"reset\");\n    store.resetEverything();\n  };\n\n  return (\n    <>\n      <p>Onboarding welkom</p>\n      <button onClick={handleResetClick}>Reset</button>\n    </>\n  );\n};\n\nexport default inject(`store`)(observer(Onboarding));\n","import React from \"react\";\n\nconst Loader = () => {\n  return <p>Loading...</p>;\n};\n\nexport default Loader;\n","import React, { Component } from \"react\";\nimport * as faceapi from \"face-api.js\";\n\nimport { inject, observer } from \"mobx-react\";\nimport io from \"socket.io-client\";\nimport Loader from \"./Loader\";\n\n// https://github.com/chanind/curve-matcher\nimport { shapeSimilarity } from \"curve-matcher\";\n// https://www.npmjs.com/package/stackblur\nimport stackblur from \"stackblur\";\nimport topRedLighten from \"../assets/effects/br/topRed-lighten.png\";\nimport topBlackLighten from \"../assets/effects/br/topBlack-lighten.png\";\nimport botRedSoft from \"../assets/effects/br/botRed-softLight.png\";\nimport botBlackSoft from \"../assets/effects/br/botBlack-softLight.png\";\n\nimport topMagLighten from \"../assets/effects/bm/topMag-lighten.png\";\nimport topBlueLighten from \"../assets/effects/bm/topBlue-lighten.png\";\nimport botMagSoft from \"../assets/effects/bm/botMag-softLight.png\";\nimport botBlueSoft from \"../assets/effects/bm/botBlue-softLight.png\";\n\nimport blackOverlay from \"../assets/effects/overlay/blackOverlay.png\";\nimport whiteOverlay from \"../assets/effects/overlay/whiteOverlay.png\";\n\n// import happyMan from \"../assets/referenceImages/happyMan.jpg\";\nimport reference1 from \"../assets/referenceImages/reference_1.jpg\";\nimport reference2 from \"../assets/referenceImages/reference_2.jpg\";\nimport reference3 from \"../assets/referenceImages/reference_3.jpg\";\n\n/* \nLandmark point structure\n\n0 - 16: Underside face -- 17 points\n17 - 21: left eyebrow -- 5 points\n22 - 26: right eyebrow -- 5 points\n27 - 30: nose bridge -- 4 points\n31 - 35: nose bottom -- 5 points\n36 - 41: left eye -- 6 points\n42 - 47: right eye -- 6 points\n48 - 59: outside mouth -- 12 points\n60 - 67: inside mouth - 8 points\n\n*/\n\nlet socket;\n\nclass Game extends Component {\n  _isMounted = false;\n\n  constructor(props) {\n    super(props);\n    this.videoTag = React.createRef();\n    this.canvasTag = React.createRef();\n    this.referenceImageTag = React.createRef();\n    this.referenceCanvasTag = React.createRef();\n    this.greyCanvasTag = React.createRef();\n    this.blurCanvasTag = React.createRef();\n\n    this.state = {\n      video: null,\n      constraints: { audio: false, video: { width: 480, height: 720 } },\n      faceCurves: [],\n      lEyebrowCurves: [],\n      rEyebrowCurves: [],\n      noseBridgeCurves: [],\n      noseBotCurves: [],\n      lEyeCurves: [],\n      rEyeCurves: [],\n      oMouthCurves: [],\n      iMouthCurves: [],\n      curves: [],\n      similarity: null,\n      currentRound: 1,\n      maxRounds: 3,\n      referenceImageArray: [],\n      _isLoaded: false\n    };\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    // UNCOMMENT TO USE SOCKET\n    // if (!socket) {\n    //   socket = io(\":4000\");\n    //   //   socket.connect(\"/\");\n    // }\n    console.log(this.state.constraints);\n    console.log(navigator.mediaDevices);\n    navigator.mediaDevices\n      .getUserMedia(this.state.constraints)\n      .then(\n        stream => (this.videoTag.current.srcObject = stream),\n        this.loadModels()\n      )\n      .catch(console.log);\n\n    this.setState(state => {\n      state.referenceImageArray.push(reference1);\n      state.referenceImageArray.push(reference2);\n      state.referenceImageArray.push(reference3);\n    });\n\n    // INIT SOCKET\n    //this.initSocket();\n  }\n\n  initSocket = () => {\n    // socket = io.connect(`/`);\n    // socket.on(`connect`, () => console.log(socket.id));\n    //console.log(`direct test zo`);\n  };\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  loadModels = async () => {\n    await faceapi.nets.ssdMobilenetv1.loadFromUri(\"./models\");\n    await faceapi.nets.faceLandmark68TinyNet.loadFromUri(\"./models\");\n\n    this.getReferenceData();\n  };\n\n  getReferenceData = async () => {\n    // const imageTag = this.referenceImageTag;\n    if (this._isMounted) {\n      const canvasTag = this.referenceCanvasTag.current;\n      const ctx = canvasTag.getContext(\"2d\");\n\n      const referenceImage = new Image(480, 720);\n\n      referenceImage.onload = async () => {\n        faceapi.matchDimensions(canvasTag, referenceImage);\n\n        ctx.drawImage(referenceImage, 0, 0, canvasTag.width, canvasTag.height);\n\n        const useTinyModel = true;\n        const detectionsWithLandmarks = await faceapi\n          .detectSingleFace(referenceImage)\n          .withFaceLandmarks(useTinyModel);\n\n        console.log(detectionsWithLandmarks);\n\n        const landMarkPoints = detectionsWithLandmarks.landmarks.positions;\n        const type = \"reference\";\n        this.addPointsToState(landMarkPoints, type);\n\n        faceapi.draw.drawFaceLandmarks(canvasTag, detectionsWithLandmarks);\n        this.setState({ _isLoaded: true });\n        //console.log(\"alles geladen\");\n      };\n\n      //referenceImage.crossOrigin = \"anonymous\";\n\n      referenceImage.src = this.state.referenceImageArray[\n        this.state.currentRound - 1\n      ];\n    }\n  };\n\n  screenShot = async () => {\n    if (this._isMounted) {\n    }\n    // Get the video and canvas element through refs\n    const videoTag = this.videoTag.current;\n    const canvas = this.canvasTag.current;\n\n    // Declare canvas context\n    const ctx = canvas.getContext(\"2d\");\n\n    const displaySize = {\n      width: videoTag.width,\n      height: videoTag.height\n    };\n    faceapi.matchDimensions(canvas, displaySize);\n\n    // Clear canvas and draw the video frame\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(videoTag, 0, 0, canvas.width, canvas.height);\n\n    // Run landmarkdetection (tiny) with faceapi\n    const useTinyModel = true;\n    const detectionsWithLandmarks = await faceapi\n      .detectSingleFace(canvas)\n      .withFaceLandmarks(useTinyModel);\n\n    // Check if a face was detected\n    if (detectionsWithLandmarks) {\n      // Add landmarks to the state\n      const landMarkPoints = detectionsWithLandmarks.landmarks.positions;\n      const type = \"player\";\n      this.addPointsToState(landMarkPoints, type);\n\n      // const resizedDetections = faceapi.resizeResults(\n      //   detectionsWithLandmarks,\n      //   displaySize\n      // );\n\n      // Draw landmarks on canvas\n      //faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n    }\n\n    this.addSharpenEffect(videoTag, canvas, ctx);\n    this.addVisualEffects(canvas, ctx);\n    this.calculateDistance();\n    this.goToNextRound();\n  };\n\n  addSharpenEffect = (image, canvas, ctx) => {\n    // https://medium.com/skylar-salernos-tech-blog/mimicking-googles-pop-filter-using-canvas-blend-modes-d7da83590d1a\n    const greyCanvas = this.greyCanvasTag.current;\n    const blurCanvas = this.blurCanvasTag.current;\n\n    const greyContext = greyCanvas.getContext(\"2d\");\n    const blurContext = blurCanvas.getContext(\"2d\");\n\n    // Draw the image on the canvas\n    greyContext.drawImage(image, 0, 0, greyCanvas.width, greyCanvas.height);\n\n    //Convert the image to black and white\n    greyContext.globalCompositeOperation = \"color\";\n    greyContext.fillStyle = \"Gray\";\n    greyContext.fillRect(0, 0, greyCanvas.width, greyCanvas.height);\n\n    // Create a copy\n    blurCanvas.width = greyCanvas.width / 4;\n    blurCanvas.height = greyCanvas.height / 4;\n    blurContext.drawImage(\n      greyCanvas,\n      0,\n      0,\n      blurCanvas.width,\n      blurCanvas.height\n    );\n\n    // Blur the copy\n    stackblur(blurCanvas, blurCanvas.width, blurCanvas.height, 10);\n\n    // Invert the blurred image\n    blurContext.globalCompositeOperation = \"difference\";\n    blurContext.fillStyle = \"white\";\n    blurContext.fillRect(0, 0, blurCanvas.width, blurCanvas.height);\n\n    // Create Mask\n    greyContext.globalCompositeOperation = \"source-over\";\n    greyContext.globalAlpha = 0.5;\n    greyContext.drawImage(\n      blurCanvas,\n      0,\n      0,\n      greyCanvas.width,\n      greyCanvas.height\n    );\n    greyContext.globalAlpha = 1;\n\n    /// draw original image to a third canvas\n\n    ctx.globalAlpha = 1;\n    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n    //overlay it on the original -do it twice for extra strength\n    ctx.globalCompositeOperation = \"overlay\";\n    ctx.drawImage(greyCanvas, 0, 0, canvas.width, canvas.height);\n    ctx.drawImage(greyCanvas, 0, 0, canvas.width, canvas.height);\n    ctx.globalCompositeOperation = \"source-over\";\n  };\n\n  addVisualEffects = (canvas, ctx) => {\n    ctx.translate(canvas.width, 0);\n    ctx.scale(-1, 1);\n\n    let botBlueSoftImg = new Image();\n    let botMagSoftImg = new Image();\n    let topBlueLightenImg = new Image();\n    let topMagLightenImg = new Image();\n\n    let whiteOverlayImg = new Image();\n\n    botBlueSoftImg.onload = () => {\n      ctx.globalCompositeOperation = \"soft-light\";\n      ctx.drawImage(botBlueSoftImg, 0, 0, canvas.width, canvas.height);\n    };\n\n    botMagSoftImg.onload = () => {\n      ctx.globalCompositeOperation = \"soft-light\";\n      ctx.drawImage(botMagSoftImg, 0, 0, canvas.width, canvas.height);\n    };\n\n    topBlueLightenImg.onload = () => {\n      ctx.globalCompositeOperation = \"lighten\";\n      ctx.drawImage(topBlueLightenImg, 0, 0, canvas.width, canvas.height);\n    };\n\n    topMagLightenImg.onload = () => {\n      ctx.globalCompositeOperation = \"lighten\";\n      ctx.drawImage(botBlueSoftImg, 0, 0, canvas.width, canvas.height);\n    };\n\n    whiteOverlayImg.onload = () => {\n      ctx.globalCompositeOperation = \"source-over\";\n      ctx.drawImage(whiteOverlayImg, 0, 0, canvas.width, canvas.height);\n    };\n\n    botBlueSoftImg.src = botBlueSoft;\n    botMagSoftImg.src = botMagSoft;\n    topBlueLightenImg.src = topBlueLighten;\n    topMagLightenImg.src = topMagLighten;\n    whiteOverlayImg.src = whiteOverlay;\n\n    console.log(topMagLightenImg);\n    console.log(whiteOverlayImg);\n  };\n\n  addPointsToState = (points, type) => {\n    let faceCurveArr = [],\n      lEyebrowCurveArr = [],\n      rEyebrowCurveArr = [],\n      noseBridgeCurveArr = [],\n      noseBotCurveArr = [],\n      lEyeCurveArr = [],\n      rEyeCurveArr = [],\n      oMouthCurveArr = [],\n      iMouthCurveArr = [];\n\n    // Loop through the landmark points and split them per landmark\n    for (let i = 0; i < 17; i++) {\n      faceCurveArr.push(points[i]);\n    }\n\n    for (let i = 17; i < 22; i++) {\n      lEyebrowCurveArr.push(points[i]);\n    }\n\n    for (let i = 22; i < 27; i++) {\n      rEyebrowCurveArr.push(points[i]);\n    }\n\n    for (let i = 27; i < 31; i++) {\n      noseBridgeCurveArr.push(points[i]);\n    }\n\n    for (let i = 31; i < 36; i++) {\n      noseBotCurveArr.push(points[i]);\n    }\n\n    for (let i = 36; i < 42; i++) {\n      lEyeCurveArr.push(points[i]);\n    }\n\n    for (let i = 42; i < 48; i++) {\n      rEyeCurveArr.push(points[i]);\n    }\n\n    for (let i = 48; i < 60; i++) {\n      oMouthCurveArr.push(points[i]);\n    }\n\n    for (let i = 60; i < 67; i++) {\n      iMouthCurveArr.push(points[i]);\n    }\n\n    // Add all the arrays to the state\n    if (type === \"player\") {\n      this.setState(state => {\n        state.curves[1] = points;\n        state.faceCurves[1] = faceCurveArr;\n        state.lEyebrowCurves[1] = lEyebrowCurveArr;\n        state.rEyebrowCurves[1] = rEyebrowCurveArr;\n        state.noseBridgeCurves[1] = noseBridgeCurveArr;\n        state.noseBotCurves[1] = noseBotCurveArr;\n        state.lEyeCurves[1] = lEyeCurveArr;\n        state.rEyeCurves[1] = rEyeCurveArr;\n        state.oMouthCurves[1] = oMouthCurveArr;\n        state.iMouthCurves[1] = iMouthCurveArr;\n      });\n    }\n\n    if (type === \"reference\") {\n      this.setState(state => {\n        state.curves[0] = points;\n        state.faceCurves[0] = faceCurveArr;\n        state.lEyebrowCurves[0] = lEyebrowCurveArr;\n        state.rEyebrowCurves[0] = rEyebrowCurveArr;\n        state.noseBridgeCurves[0] = noseBridgeCurveArr;\n        state.noseBotCurves[0] = noseBotCurveArr;\n        state.lEyeCurves[0] = lEyeCurveArr;\n        state.rEyeCurves[0] = rEyeCurveArr;\n        state.oMouthCurves[0] = oMouthCurveArr;\n        state.iMouthCurves[0] = iMouthCurveArr;\n      });\n    }\n\n    // this.setState(state => {\n    //   state.curves.push(points);\n    //   state.faceCurves.push(faceCurveArr);\n    //   state.lEyebrowCurves.push(lEyebrowCurveArr);\n    //   state.rEyebrowCurves.push(rEyebrowCurveArr);\n    //   state.noseBridgeCurves.push(noseBridgeCurveArr);\n    //   state.noseBotCurves.push(noseBotCurveArr);\n    //   state.lEyeCurves.push(lEyeCurveArr);\n    //   state.rEyeCurves.push(rEyeCurveArr);\n    //   state.oMouthCurves.push(oMouthCurveArr);\n    //   state.iMouthCurves.push(iMouthCurveArr);\n    // });\n  };\n\n  calculateDistance = () => {\n    // Calculate the similarity between all the detected curves\n    if (this.state.curves[0] && this.state.curves[1]) {\n      const similarityFace = shapeSimilarity(\n        this.state.faceCurves[0],\n        this.state.faceCurves[1]\n      );\n      console.log(\"similarity face:\", similarityFace);\n\n      const similarityLEyeBrow = shapeSimilarity(\n        this.state.lEyebrowCurves[0],\n        this.state.lEyebrowCurves[1]\n      );\n      console.log(\"similarity LEyeBrow:\", similarityLEyeBrow);\n\n      const similarityREyeBrow = shapeSimilarity(\n        this.state.rEyebrowCurves[0],\n        this.state.rEyebrowCurves[1]\n      );\n      console.log(\"similarity REyeBrow:\", similarityREyeBrow);\n\n      const similarityNoseBridge = shapeSimilarity(\n        this.state.noseBridgeCurves[0],\n        this.state.noseBridgeCurves[1]\n      );\n      console.log(\"similarity NoseBridge:\", similarityNoseBridge);\n\n      const similarityNoseBot = shapeSimilarity(\n        this.state.noseBotCurves[0],\n        this.state.noseBotCurves[1]\n      );\n      console.log(\"similarity NoseBot:\", similarityNoseBot);\n\n      const similarityLEye = shapeSimilarity(\n        this.state.lEyeCurves[0],\n        this.state.lEyeCurves[1]\n      );\n      console.log(\"similarity LEye:\", similarityLEye);\n\n      const similarityREye = shapeSimilarity(\n        this.state.rEyeCurves[0],\n        this.state.rEyeCurves[1]\n      );\n      console.log(\"similarity REye:\", similarityREye);\n\n      const similarityOMouth = shapeSimilarity(\n        this.state.oMouthCurves[0],\n        this.state.oMouthCurves[1]\n      );\n      console.log(\"similarity OMouth:\", similarityOMouth);\n\n      const similarityIMouth = shapeSimilarity(\n        this.state.iMouthCurves[0],\n        this.state.iMouthCurves[1]\n      );\n      console.log(\"similarity i mouth:\", similarityIMouth);\n\n      // const averageSimilarity =\n      //   (similarityFace +\n      //     similarityLEyeBrow +\n      //     similarityREyeBrow +\n      //     similarityNoseBridge +\n      //     similarityNoseBot +\n      //     similarityLEye +\n      //     similarityREye +\n      //     similarityOMouth +\n      //     similarityIMouth) /\n      //   9;\n\n      const averageSimilarity =\n        ((similarityFace +\n          similarityLEyeBrow +\n          similarityREyeBrow +\n          similarityOMouth +\n          similarityIMouth) /\n          5) *\n        100;\n      console.log(`Average: averageSimilarity`, averageSimilarity);\n      this.setState({ similarity: averageSimilarity });\n\n      const curvesSim = shapeSimilarity(\n        this.state.curves[0],\n        this.state.curves[1]\n      );\n      console.log(\"similarity whole thing:\", curvesSim);\n    } else {\n      console.log(\"geen curves in state momenteel\");\n    }\n  };\n\n  goToNextRound = () => {\n    this.setState(prevState => {\n      return {\n        currentRound: prevState.currentRound + 1\n      };\n    });\n\n    this.getReferenceData();\n  };\n\n  render() {\n    const { store } = this.props;\n    if (this.state.currentRound > 3) {\n      store.setGameEnded();\n    }\n\n    const generateLandmarks = () => {\n      // maps video frame to canvas and detects landmarks\n      console.log(\"generate\");\n      this.screenShot();\n    };\n\n    return (\n      <>\n        {!this.state._isLoaded ? <Loader /> : null}\n        <div style={{ display: !this.state._isLoaded ? \"none\" : \"block\" }}>\n          <div>\n            <button\n              onClick={generateLandmarks}\n              // style={{\n              //   position: \"absolute\",\n              //   bottom: \"0\",\n              //   left: \"0\"\n              // }}\n            >\n              Play\n            </button>\n            <p>\n              similarity: {this.state.similarity ? this.state.similarity : `0`}\n            </p>\n            <p>current round: {this.state.currentRound}</p>\n          </div>\n          <div>\n            {/* <img\n              crossorigin=\"anonymous\"\n              ref={this.referenceImage}\n              src=\"https://image.freepik.com/free-photo/happy-man-shouting-screaming_23-2148221721.jpg\"\n            /> */}\n            <canvas\n              ref={this.referenceCanvasTag}\n              width={480}\n              height={720}\n            ></canvas>\n            <video\n              style={{\n                //   position: \"absolute\",\n                top: \"0\",\n                left: \"0\",\n                transform: \"scaleX(-1)\"\n              }}\n              id=\"videoTag\"\n              ref={this.videoTag}\n              width={this.state.constraints.video.width}\n              height={this.state.constraints.video.height}\n              autoPlay\n              muted\n            ></video>\n            <canvas\n              style={{\n                //   position: \"absolute\",\n                //   top: \"0\",\n                //   left: \"0\",\n                transform: \"scaleX(-1)\"\n              }}\n              id=\"myCanvas\"\n              ref={this.canvasTag}\n              width={this.state.constraints.video.width}\n              height={this.state.constraints.video.height}\n            ></canvas>\n            <div>\n              <canvas\n                style={{\n                  transform: \"scaleX(-1)\",\n                  display: \"none\"\n                }}\n                id=\"greyCanvas\"\n                ref={this.greyCanvasTag}\n                width={this.state.constraints.video.width}\n                height={this.state.constraints.video.height}\n              ></canvas>\n              <canvas\n                style={{\n                  transform: \"scaleX(-1)\",\n                  display: \"none\"\n                }}\n                id=\"blurCanvas\"\n                ref={this.blurCanvasTag}\n                width={this.state.constraints.video.width}\n                height={this.state.constraints.video.height}\n              ></canvas>\n            </div>\n          </div>\n        </div>\n\n        {/* <button\n          onClick={calculateDistance}\n          style={{\n            position: \"absolute\",\n            bottom: \"0\",\n            right: \"0\"\n          }}\n        >\n          Calculate distances\n        </button> */}\n      </>\n    );\n  }\n}\n\nexport default inject(`store`)(observer(Game));\n","import React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nimport { socket } from \"../api/Api\";\n\nclass Socket extends Component {\n  constructor(props) {\n    super(props);\n    this.ownVideoFeed = React.createRef();\n\n    this.state = {\n      video: null,\n      constraints: { audio: false, video: { width: 480, height: 720 } }\n    };\n  }\n\n  componentDidMount() {\n    // const { endpoint } = this.state;\n    //const socket = socketIOClient(\":8080\");\n\n    navigator.mediaDevices\n      .getUserMedia(this.state.constraints)\n      .then(stream => (this.ownVideoFeed.current.srcObject = stream))\n      .catch(console.log(\"failed to get user media\"));\n  }\n\n  componentWillUnmount() {\n    // let stream = this.ownVideoFeed.current.srcObject;\n    // let tracks = stream.getTracks();\n    // tracks.forEach(function(track) {\n    //   track.stop();\n    // });\n    // this.ownVideoFeed.current.srcObject = null;\n  }\n\n  render() {\n    return (\n      <>\n        <p>Socket test</p>\n        <video\n          id=\"ownVideoFeed\"\n          ref={this.ownVideoFeed}\n          width={200}\n          height={200}\n          autoPlay\n          muted\n        ></video>\n      </>\n    );\n  }\n}\n\nexport default Socket;\n","import React, { Component } from \"react\";\nimport socketIOClient from \"socket.io-client\";\n\nvar socket;\nclass Api extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { response: 0, endpoint: \":8080\" };\n  }\n\n  socket = socketIOClient(this.state.endpoint);\n\n  render() {\n    return <></>;\n  }\n}\n\nexport default Api;\nexport { socket };\n","import React from \"react\";\nimport { inject, PropTypes, observer } from \"mobx-react\";\n\nimport Camera from \"../components/Camera\";\nimport Onboarding from \"../components/Onboarding\";\nimport Game from \"../components/Game\";\nimport Socket from \"../components/Socket\";\n\nconst Wrapper = ({ store }) => {\n  const { flowStatus } = store;\n\n  switch (flowStatus) {\n    case \"detectedFalse\":\n      return <Camera />;\n    case \"detectedTrue\":\n      return <Onboarding />;\n    case \"onboardingEnded\":\n      return <Game />;\n    case \"gameEnded\":\n      return <Onboarding />;\n    case \"Socket\":\n      return <Socket />;\n    default:\n      return <Camera />;\n  }\n\n  //   if (detected === false) {\n  //     // Poster carousel + face detection\n  //     return <Camera />;\n  //   }\n\n  //   if (detected === true) {\n  //     // Onboarding (installation)\n  //     return <Onboarding />;\n  //   }\n};\n\nexport default inject(`store`)(observer(Wrapper));\n","import React from \"react\";\nimport { inject, PropTypes, observer } from \"mobx-react\";\n\nconst Debugnavigation = ({ store }) => {\n  const handleResetClick = e => {\n    console.log(\"reset\");\n    store.resetEverything();\n  };\n\n  const handleDetectedTrue = e => {\n    console.log(\"onboarding\");\n    store.setDetected();\n  };\n\n  const handleGameStart = e => {\n    console.log(\"start game\");\n    store.startGame();\n  };\n  return (\n    <>\n      <button onClick={handleResetClick}>Poster carousel</button>\n      <button onClick={handleDetectedTrue}>Onboarding</button>\n      <button onClick={handleGameStart}>Start Game</button>\n    </>\n  );\n};\n\nexport default inject(`store`)(observer(Debugnavigation));\n","import React from \"react\";\nimport \"./App.css\";\nimport Wrapper from \"./containers/Wrapper\";\nimport Debugnavigation from \"./components/Debugnavigation\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Debugnavigation />\n      <Wrapper />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { decorate, observable, configure, action } from \"mobx\";\n\nconfigure({ enforceActions: `observed` });\n\nclass Store {\n  flowStatus = \"Socket\";\n  //   constructor() {}\n\n  setDetected = () => {\n    this.flowStatus = \"detectedTrue\";\n  };\n\n  startGame = () => {\n    this.flowStatus = \"onboardingEnded\";\n  };\n\n  resetEverything = () => {\n    this.flowStatus = \"detectedFalse\";\n  };\n  setGameEnded = () => {\n    this.flowStatus = \"gameEnded\";\n  };\n}\n\ndecorate(Store, {\n  detected: observable,\n  setDetected: action,\n  resetEverything: action,\n  flowStatus: observable,\n  startGame: action,\n  setGameEnded: action\n});\n\nconst store = new Store();\n\nexport default store;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { Provider } from \"mobx-react\";\nimport store from \"./store\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/topMag-lighten.474179bf.png\";","module.exports = __webpack_public_path__ + \"static/media/topBlue-lighten.aaa2da5d.png\";","module.exports = __webpack_public_path__ + \"static/media/botMag-softLight.45f1a164.png\";","module.exports = __webpack_public_path__ + \"static/media/botBlue-softLight.db9be1e2.png\";","module.exports = __webpack_public_path__ + \"static/media/whiteOverlay.a94ca8a5.png\";","module.exports = __webpack_public_path__ + \"static/media/reference_1.ad681ba9.jpg\";","module.exports = __webpack_public_path__ + \"static/media/reference_2.9526096b.jpg\";","module.exports = __webpack_public_path__ + \"static/media/reference_3.0891363a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/topRed-lighten.1f3f44aa.png\";"],"sourceRoot":""}